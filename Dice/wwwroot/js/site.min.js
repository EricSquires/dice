$(function(){var n=$(".die-value").map(function(){return parseInt(this.innerText)});diceDrawer=new DiceDrawer($("#drawArea"),n)});roll=function(){var n=$(".dice");n.each(function(){var n=$(this),t=parseInt(n.find(".die-faces").text());$.get("/api/Roll/"+t,function(t){n.find(".die-value").text(t)})})};var DiceDrawer=function(n,t){function c(){e=$(n);r=e.innerWidth();f=r*.5;o=l();i=new THREE.PerspectiveCamera(75,r/f,.1,1e3);i.position.set(0,-1,0);i.lookAt(new THREE.Vector3(0,0,-10));u=new THREE.WebGLRenderer;u.setSize(r,f);e.append(u.domElement);s()}function l(){var n=new THREE.Scene,i,e;n.add(new THREE.AmbientLight(4210752));i=new THREE.PointLight(16777215,.8);i.position.set(-5,5,0);n.add(i);i=new THREE.PointLight(16777215,.6);i.position.set(5,-5,0);n.add(i);a(n);var u=t.length,f=2.5,r=1,o;return o=u%2==0?(r+f)/2+(u/2-1)*(r+f):r*Math.floor(u/2)+f*Math.floor(u/2),e=-o,t.map(function(t){v(n,t,r,e);e+=f+r}),n}function a(n){var i=new THREE.PlaneGeometry(r*2,f*2,1),u=new THREE.MeshPhongMaterial({color:26112}),t=new THREE.Mesh(i,u);t.translateZ(-100);n.add(t)}function v(n,t,i,r){var f=new THREE.BoxGeometry(i,i,i),e=new THREE.MeshPhongMaterial({color:11141120}),u=new THREE.Mesh(f,e);u.translateZ(-5);u.translateX(r);h.push(u);n.add(u)}function s(){requestAnimationFrame(s);u.render(o,i)}var e,r,f,o,i,u,h=[],t=t;c()};DiceDrawer.prototype={constructor:DiceDrawer};